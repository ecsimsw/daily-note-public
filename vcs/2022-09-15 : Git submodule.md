## Submodule

저장소 하위에 다른 저장소를 포함시킨다. 단순히 parent 레포지토리에서 child 레포지토리의 주소와 참조할 커밋 주소를 저장한다. 

![image](https://user-images.githubusercontent.com/46060746/190288685-eb57abcf-9452-48a4-8bbb-4a7fb34dc0f8.png)

위 예시에서 parent 레포지토리는 cicd-library를 submodule로 갖고 있으면서, `f3e443a`를 commit id로 사용하고 있는 커밋 상태를 참조한다. 

![image](https://user-images.githubusercontent.com/46060746/190288984-0d7e15df-8ef1-4a50-9703-9a26450e0935.png)

.gitmodules에는 이런 서브모듈에 대한 정보가 저장된다.

</br>

## Usage

서브 모듈을 어떤 상황에서, 어떻게 사용하면 좋을까. 단순히 git을 이렇게 사용할 수도 있구나~를 넘어서 어떤 상황에서 사용되면 좋을지를 고민해보자.   

#### 1. 외부 라이브러리 등, 버져닝이 필요한 모듈 참조

A라는 프로젝트에서 B라는 라이브러리를 사용하고 있다. B를 import하면 hi라는 변수를 사용할 수 있다고 가정해보자.    

B를 A의 관리에서 벗어나 사용 환경에서 import를 하자니 B와 Sync 문제가 걱정된다. 
이를 테면 A는 B.hi가 있다고 가정하고 개발하지만 B의 버전이 바뀌어 hi를 더 이상 사용할 수 없는 경우가 된다면 이는 A에 큰 문제를 야기할 것이다. 
(Spring의 설정 파일이 외부에서 관리된다고 생각해보자. 프로퍼티 변경을 관리할 수 없게 될 것이다.)
  
그렇다고 직접 프로젝트에 포함시키자니, 라이브러리가 update된 상황을 따라가기 어려울 것이다. 
특히 한 프로젝트에서 사용하는 라이브러리가 여러개인 상황이라면 모든 라이브러리를 개발전에 매번 업데이트 하기가 까다로울 것이다.    

submodule을 사용하게 되면 하위 저장소의 특정 커밋을 참조하기 때문에 Sync 문제를 걱정하지 않아도 된다. 어차피 해당 커밋을 기준으로 파일이 존재한다. 
모듈의 내용이 remote에서 업데이트 되더라도 update만 안해준다면 당시를 기준으로 코드를 사용할 수 있다.   

또 여러 서브 모듈을 동시에 관리할 수 있게된다. 
예를 들면 `git submodule update --remote`으로 하위의 모든 서브 모듈을 업데이트 할 수 있다. 물론 특정 모듈만을 지정하여 업데이트도 가능하다.
   
   
#### 2. 숨기고자 하는 파일 정보를 모듈로 관리

특정 파일 몇개는 숨겨 관리하고 싶을 때 사용하기도 한다. 이를 테면 public한 저장소에서 암호나 key 같은 중요한 정보를 담는 설정 파일을 따로 관리하고자 할 때이다.   

단순히 해당 설정 파일들을 gitignore 처리해서 숨기고 관리를 포기하는 것이 아니라, 
submodule로 해당 프로젝트에 포함시키되, child 저장소를 private 처리하여 권한이 있는 사용자만 접근 할 수 있도록 하는 것으로 설정 파일을 관리하는 숨길 수 있게된다.
