## E20240222 XSS, CSRF.md

어렵다 어려워..

- XSS : 스크립트를 페이지에 삽입하여 해당 페이지를 개발한 개발자가 의도하지 않은 동작이 수행되는 것
```
1. 악의적인 사용자가 A 사이트 게시물에 악성 페이지로 이동시키는 스크립트를 추가한다.
2. 정상 사용자가 해당 게시물을 확인하고 악성 페이지로 이동된다.
```
- 해결 방안 : 1. LocalStorage 를 사용하지 않는다. 2. HttpOnly 쿠키를 사용한다. 3. XSS 필터를 사용하여 악성 사용자가 script 를 삽입함을 막는다.

- CSRF : 해킹 서버가 사용자의 쿠키(세션 정보)를 이용해서 사용자인척 하는 것
```
1. 사용자가 A 사이트에 로그인한다. (로그인 토큰이 쿠키로 들어왔다고 가정)
2. 사용자가 해킹 사이트에 접속한다.
3. 해킹 사이트는 접속 요청을 포워딩하여 A 사이트에 로그인 정보로 사용자 인척한다. (사용자 쿠키는 요청에 자동 포함된다.)
```
- 해결 방안 : 1. 쿠키를 사용하지 않는다. 2. Referrer 헤더를 확인한다. 3. CSRF 토큰을 사용한다 (쿠키에 저장하지 않는 비밀 값). 4. SOP 정책을 강화(strict) 한다.

> 그럼 localStorage 를 사용하면 Xss에 위험하고, 쿠키를 사용하면 CSRF 에 위험한데?
> 나는 Http only 를 적용한 쿠키를 사용하고 CSRF 를 열심히 방어하겠다. 헤더도 체크하고 CSRF 토큰도 두고
